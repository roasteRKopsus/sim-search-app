{% extends "base.html" %}
{% block content %}
<h3>Manage Uploaded Files</h3>
<table class="table table-hover">
  <thead class="table-light">
    <tr>
      <th>File</th><th>Provider</th><th>Rows</th><th>Uploaded</th><th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for f in files %}
    <tr>
      <td>{{ f.filename }}</td>
      <td>{{ f.provider or 'â€”' }}</td>
      <td>{{ f.row_count }}</td>
      <td>{{ f.uploaded_at.strftime('%Y-%m-%d %H:%M') }}</td>
      <td>
        <a href="{{ url_for('uploaded_file', filename=f.filename) }}" class="btn btn-sm btn-outline-primary">Download</a>
        <a href="{{ url_for('admin.delete_file', file_id=f.id) }}"
           class="btn btn-sm btn-outline-danger"
           onclick="return confirm('Delete {{ f.filename }} and all its records?')">Delete</a>
      </td>
    </tr>
    {% else %}
    <tr><td colspan="5" class="text-center text-muted">No files.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}